{% use 'bootstrap_3_layout.html.twig' %}

{# Add hidden field with component signal and submit button. #}
{%- block form_end -%}
	<div class="form-group">
		<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2">
			<input type="submit" value="UloÅ¾it" class="btn btn-primary">
		</div>
	</div>
	<input type="hidden" name="do" value="{{ component }}-submit">
    {{- parent() -}}
{%- endblock form_end -%}

{# Add form-horizontal class to form tag, enable ajax validation. #}
{% block form_start -%}
	{% set attr = attr|merge({class: (attr.class|default('') ~ ' form-horizontal form-ajax-validation')|trim, 'data-validate': component ~ '-validate'}) %}
	{{- parent() -}}
{%- endblock %}

{# Replace div with fieldset as container. #}
{%- block form_widget_compound -%}
	<fieldset {{ block('widget_container_attributes') }}>
		{%- if form.parent is empty -%}
			{{ form_errors(form) }}
		{%- endif -%}
		{{- block('form_rows') -}}
		{{- form_rest(form) -}}
	</fieldset>
{%- endblock form_widget_compound -%}

{# Add div with responsive classes around field. #}
{% block form_row -%}
	<div class="form-group{% if (not compound or force_error|default(false)) and not valid %} has-error{% endif %}">
		{{- form_label(form) -}}
		<div class="col-sm-9 col-lg-10">
			{{- form_widget(form) -}}
			{{- form_errors(form) -}}
		</div>
	</div>
{%- endblock form_row %}

{# Add responsive classes to label. #}
{% block form_label -%}
	{%- set label_attr = label_attr|merge({class: (label_attr.class|default('') ~ ' col-sm-3 col-lg-2')|trim}) -%}
	{{- parent() -}}
{%- endblock form_label %}

{# Add div with responsive classes around button. #}
{% block button_row -%}
	<div class="form-group">
		<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2">
			{{- form_widget(form) -}}
		</div>
	</div>
{%- endblock button_row %}

{# Add btn-primary class to submit buttons. #}
{% block button_widget -%}
	{% set attr = attr|merge({class: (attr.class|default('btn-primary') ~ ' btn')|trim}) %}
	{{- parent() -}}
{%- endblock %}

{# Wrap errors by a placeholder element. #}
{% block form_errors -%}
	<div id="error__{{ id }}" class="error-container">
		{{- block('form_errors_content') -}}
	</div>
{%- endblock form_errors %}

{# Only show one error for each field. #}
{% block form_errors_content -%}
	{% if errors|length > 0 -%}
		{%- if form.parent -%}
			<span class="error-message">{{ errors[0].message }}</span>
		{%- else -%}
			<div class="alert alert-danger">
				<i class="fa fa-ban"></i>
				{{ errors[0].message }}
			</div>
		{%- endif -%}
	{%- endif -%}
{%- endblock form_errors_content %}
